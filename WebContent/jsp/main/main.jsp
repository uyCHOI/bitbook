<%@ page contentType="text/html; charset=UTF-8" %>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
	name="viewport" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<!-- Favicons -->
<link rel="apple-touch-icon" href="../assets/img/kit/free/apple-icon.png">
<link rel="icon" href="../assets/img/kit/free/favicon.png">
<title>Material Kit by Creative Tim</title>
<!--     Fonts and icons     -->
<link rel="stylesheet" type="text/css"
	href="../assets/assets-for-demo/common.css">
<link rel="stylesheet" type="text/css"
	href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
<link rel="stylesheet" href="../assets/css/material-kit.css?v=2.0.2">
<!-- Documentation extras -->
<!-- CSS Just for demo purpose, don't include it in your project -->
<link href="../assets/assets-for-demo/demo.css" rel="stylesheet" />
<!-- iframe removal -->
<style>
<<<<<<< HEAD
	body{background: #fff !important;}
	.f_info div .f_link>img {
	    margin: 10px 10px 10px 10px;
	    width: 50px;
	    height: 50px;
	    float: left;
	    clear: both;
	    display: block;
	}
	.f_info div.friendMember {
	    height: 80px;
	}

	.img-fluid{
		width: 30px;
		height: 30px;
	}

	#open_range_td{
		z-index: 1;
	}

	.search_friends{
		z-index: 1;
	}


	#searchBox{
		width: 100%;
		margin-top: 7px;
	}
	.friendMember{
		background-color: white;
		height: 80px;
	}
	#searchName{
		width: 86%;
	}

	#content{
		min-height: 100px;
		height: auto;
		margin-bottom: 5px;
		font-size: 20px;
	}
	#content div{
		font-size: 20px;
	}
	.imgs{
		height: 100px;
	    width: 100px;
	    position: relative;
	    padding: 2px;
	    display: block;
	    margin: 8px;
	    border-radius: 20px;
		
	}
	.imgs_field:hover>img{
		transition:0.5s;
		background-color: #9c27b0;
		opacity: 0.2;
	}
	
	.imgs_field:hover>span{
		transition:0.3s;
		opacity: 0.9;
	}
	
	.imgs_field{
		float: left;
	    position: relative;
	    width: 110px;
	}
	#options{
		clear: both;
	}
	.del_img{
		position: absolute;
	    width: 25px;
	    height: 25px;
	    top: 6px;
	    right: 0;
	    z-index: 2;
	    opacity: 0;
		
	}
	#imgarea{
		min-height: 10px;
		margin-bottom: 10px;
		display: block;
	}
	#open_range{
		float: right;
	}
	#post_tag_list{
		font-size: 15px;
	}
	
	.imgInp{
		display: none;
	}
	#attachBtn{
		float: left;
	}
	#tag_friends{
		width: 300px;
		margin-top: 10px;
	}
	#options{
		width: 100%;
	}
	
	#submit_span{
		float: right;
	}
	
	#submit_td{
		width: 10px;
	}
	#tag_area{
		width: 200px;
		height: 10px;
		display: block;

	}
	.f_img{
		height: 30px;
		float: left;
		padding: 0px;
		margin-top: 10px;
		margin-right: 10px;
		margin-left: 10px;
		
	}
	.f_name{
		float:left;
		font-size: 14px;
		padding-bottom: 10px;
		font-weight: bold;
		width: 250px;
	}
	#f_list{
		position: absolute;
		top:68px;
		width:300px;
		left: 97px;
		background-color: white;
		border: 1px solid black;
		display: none;
		z-index: 1;
	}
	.f_search{
		font-size: 15px;
		width: 30px;
		height: 20px;
		margin-right: 10px;
		font-weight: bold;
	}
	.f_list_detail{
		clear: both;
		width: 300px;
	}
	.search_friends{height: 50px;}
	.search_friends:hover{
		background-color: #FFE8FF
	}
	#tag{
		min-height: 10px;
		margin-bottom: 5px;
		margin-top: 5px;
		display: block;
	}
	.del_icon{
		font-size: 16px;
		opacity: 0;
	}
	.tag_name{
		font-size: 16px;
		font-weight: bold;
		color: blue;
	}
	.tags:hover>.del_icon{
		opacity: 0.7;
		transition:0.5s;
    }
    #together{
    	float: left;
    }
	#tags{
		text-align: right;
	}
	#content_copy{
		display: none;
	}
	#submit{
		margin-bottom: 5px;
    	margin-right: 0px;
	}
	#attachBtn,#submit{
	margin-bottom: 0px;
    background-color: #9c27b0;
    border-color: #d400c8;
    box-shadow: 0 2px 2px 0 #cc95c963, 0 3px 1px -2px rgba(0, 188, 212, 0.2), 0 1px 5px 0 rgba(0, 188, 212, 0.12);
    opacity: 0.7;
	}
	#searchArea{
		background-color: #9c27b0;
		width:550px;
		height: 52px;
		opacity: 0.9;
	}
	.select_info{
		z-index: 2;
	}
	img.profile {
	    display: block;
	    float: left;
	    top: 4px;
	    left: -10px;
	    vertical-align: middle;
	    width: 50px;
	    height: 50px;
	    position: relative;
	    margin-left: 15px;
	}
	.content{
		background-color: white;
	}

=======
>>>>>>> 07c3c3a41761e887580a4ddf39b1cf705e4357bd
</style>
</head>
<<<<<<< HEAD
<body class="index-page " >
=======
<body class="index-page " style="background:#fff;">
	<nav class="navbar fixed-top navbar-expand-lg " color-on-scroll="100"
		id="sectionsNav" style="position: fixed; background: -webkit-linear-gradient(135deg, rgb(251, 70, 131) 0%, rgb(206, 132, 157) 100%) !important; ">
		<div class="container">
			<div class="navbar-translate">
				<a class="navbar-brand" href="main.jsp" style="color:#fff;">Bit book </a>
				<button class="navbar-toggler" type="button" data-toggle="collapse"
					aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span> <span
						class="navbar-toggler-icon"></span> <span
						class="navbar-toggler-icon"></span>
				</button>
			</div>
			<div class="collapse navbar-collapse">
				<ul class="navbar-nav ml-auto">

					<li class="nav-item"><a class="nav-link"
						href="../member/infoMember.jsp" onclick="scrollToDownload()"> <span
							class="glyphicon glyphicon-user" style="color:#fff;">홍길동</span>
							<div class="ripple-container"></div></a></li>
					<li class="dropdown nav-item"><a href="#"
						class="dropdown-toggle nav-link" data-toggle="dropdown"
						aria-expanded="false" style="color:#fff;"> <i class="material-icons">apps</i> 알림
							<div class="ripple-container"></div></a>
						<div class="dropdown-menu dropdown-with-icons">
							<a href="../login/index.jsp" class="dropdown-item"> <i
								class="material-icons">layers</i>친구로 부터 메세지가 도착했습니다.
							</a> <a
								href="http://demos.creative-tim.com/material-kit/docs/2.0/getting-started/introduction.html"
								class="dropdown-item"> <i class="material-icons">content_paste</i>
								친구 신청 되었습니다.
							</a>
						</div></li>
											<li class="nav-item"><a class="nav-link"
						href="javascript:void(0)" onclick="scrollToDownload()"style="color:#fff;"> 친구 찾기
							<div class="ripple-container"></div>
					</a></li>
					<li class="nav-item"><a class="nav-link"
						href="../login/index.jsp" onclick="scrollToDownload()"style="color:#fff;"> 로그아웃
							<div class="ripple-container"></div>
					</a></li>

				</ul>
			</div>
		</div>

		</div>
	</nav>
>>>>>>> 07c3c3a41761e887580a4ddf39b1cf705e4357bd
	<div class="main main-raised" style="box-shadow:none;">
		<div class="section section-basic" style="padding: 140px 0; width: 90%;">
			<div class="container"
				style="position: relative; max-width: 851px;">
				<div id="buttons" class="cd-section"
					style="width: 60%; height: 100%;">
<<<<<<< HEAD
					
					
					
					
					
<form  method="post" action="/bitbook/addpost" enctype="multipart/form-data">
					<div class="row">
						<div class="col-md-12" style="margin-top: 20px; ">
						
						<input type="hidden" id="memNo" name="no" value="1048">
							<div style="background: #f6f7f9; border:1px solid #dddfe2; width:550px;">
=======
					<div class="row">
						<div class="col-md-12" style="margin-top: 30px; ">
							<div style="background: #f6f7f9; border:1px solid #dddfe2;">
>>>>>>> 07c3c3a41761e887580a4ddf39b1cf705e4357bd
								<div class="title_head">
									<h5 class="title">게시물올리기</h5>
								</div>
								<div class="min_content">
									<a href="#"> <img class="profile rounded-circle img-fluid"
										src="assets/img/kit/faces/avatar.jpg" alt="Circle Image">
									</a>
									<div>
									<div id="content" contenteditable="true"></div>
									<input type="hidden" id="content_copy" name="content" value="">
									<div id="imgarea"></div>
									<br>
									<div id="tags"><div id="tagCnt"></div> <input type="hidden" id="tag" name="tag" value="">
									</div>
									</div>
								</div>
								
								
								
								<div class="min_foot" style="height:78px; position: relative;">
								
								<table id="options">
								<tr>
									<td>
										<button id="attachBtn" type="button" class="btn btn-info btn-sm" style="margin: 0px;">
											사진올리기
										</button>
									</td>

								</tr>
 		   						<tr> 
	 		   						<td>		   						
										<span class="f_search">함께한 친구</span><input type="text" id="tag_friends" placeholder=" 누구와 계신가요?">
	 		   						
	 		   							<div id = "tag_area">
			    <div id = "f_list"> 
			    		<%--
						<div class="f_list_detail">
				           <img src="/bitbook/member_profile/defalutImg.jpg" alt="Circle Image" 	class="f_img rounded-circle img-fluid">
				           <span class="f_name">이름</span>
						</div>
			    		 --%>
				</div>
	 		   							</div>
	 		   						</td>
	 		   						<td id="open_range_td">
										<select id="open_range" class="select_info" name="open_range">
											<option value="1">전체공개</option>
											<option value="2">친구공개</option>
											<option value="3">나만보기</option>
										</select>
									</td>
	 		   						<td id="submit_td">
										<button type="submit" id="submit" class="btn btn-info btn-sm" style="margin-bottom: 0px;">등록</button>
									</td>
 		   						</tr>

								</table>
							</div>
						</div>
					</div>
				</div>
</form>

<div id="searchArea">
<div class="row" style="margin-top: 25px;">
						<div class="col-md-12" style="margin: 1px 1px 1px 1px;">
							<div class="col-md-12">
								      <form class="form-inline ml-auto">
          <div class="form-group has-white" style="width: 242px;">
            <input type="text" class="form-control" placeholder="Search" style="width: 259px; color:#4b4f56;">
          </div>
          <button type="submit" style="margin-bottom:-18px"class="btn btn-white btn-raised btn-fab btn-fab-mini btn-round">
              <i class="material-icons" >search</i>
          </button>
      </form>
      <div style="position: absolute; right:0; top:13px; margin-right: 10px;">
      <select class="select_info">
									<option>최신순보기</option>
									<option>좋아요순</option>
									<option>덧글순</option>
								</select> <select class="select_info">
									<option>전체보기</option>
									<option>내꺼보기</option>
									<option>친구꺼보기</option>
								</select>
								</div>
							</div>
						</div>
					</div>
<<<<<<< HEAD

</div>


				<!-- 게시글 시작 -->
							<div class="row" style="margin-top: 0px; height: 600px; width: 580px;">
		<!-- 게시글 -->
		<div class="col-md-12" >
=======
					<div class="row" style="margin-top: 0px; height: 600px;">
						<div class="col-md-12" >
>>>>>>> 07c3c3a41761e887580a4ddf39b1cf705e4357bd
							<div class="content">
								<div class="title_head">
									<h5 class="title">피드</h5>
								</div>
								<div class="min_content">
									<a href="#"> <img class="profile rounded-circle img-fluid"
										src="assets/img/kit/faces/avatar.jpg" alt="Circle Image">
									</a>
									<div class="board_wrap" style="margin-left: 75px;">
										<div class="p_info">
											<span class="c_info" >박보영</span> <span>2018-11-11-12-32-33</span>
										</div>
										<div class="board_content">
											내용입니다. <br> 내용입니다. <br> 내용입니다. <br>
										</div>
										<div style="height: 40px;">
											<div class="tag_wrap">
												<span
													style="font-weight: bold; padding-right: 10px; display: inline-block;">함께한
													친구</span> <a class="tag" href="#">홍길동</a> <a class="tag" href="#">홍홍</a>
											</div>
											<div style="display: inline-block;">
												<button type="submit" class="btnA">수정</button>
												<span>|</span>
												<button type="submit" class="btnB">삭제</button>
											</div>
										</div>
									</div>
								</div>
								<div class="title_head" style="">
									<button
										class="likey btn btn-primary btn-fab btn-fab-mini btn-round"
										style="border-radius: 5px; width: 80px;">
										<i class="likey_icon material-icons">favorite</i> <em
											class="likey_num">1</em>
									</button>
									<button type="button" class="c_c_write btn btn-primary">
										댓글 <span>11개</span>
									</button>
								</div>
							</div>
<<<<<<< HEAD
				<!-- 게시글 -->
				
				
				
				<!-- 덧글 불러오기 -->
						<c:import url="comment.jsp" >
					    <c:param name="게시글번호"> 게시글번호 넘겨주기 </c:param>
					  	</c:import>
				<!-- 덧글 불러오기 -->
						
		</div>
	</div>
				<!-- 덧글 불러오기 -->
=======
							<!-- 댓글  -->
							<div class="coment">
								<a href="#" style="margin-left: 16px; display: block;"> <img
									style="display: block; float: left; width: 47px;"
									src="assets/img/kit/faces/avatar.jpg" alt="Circle Image"
									class="rounded-circle img-fluid">
								</a>
								<div class="c_wrap">
									<span class="c_info">박보영</span> <span class="c_content">텍스트입이낟.ㅇㄹㄴㅇsdfsdfsdfsdfsdfsfdsfsfsdfsdfㅎㄶㄴㅇㅎㄴㅇㅎㄴㅎㄴㅇㅎㅇ</span>
								</div>
								<div
									style="margin-left: 70px; margin-top: 5px; position: relative;">
									<button class="btnA">수정</button>
									<span>|</span>
									<button class="btnB">삭제</button>
									<span class="year" style="margin-left: 10px; font-size: 13px;">2018-10-20-11-33-40</span>
									<button
										class="likey btn btn-primary btn-fab btn-fab-mini btn-round"
										style="left:324px !important;bottom:-22px; border-radius: 5px; width: 80px;">
										<i class="likey_icon material-icons">favorite</i> <em
											class="likey_num">1</em>
									</button>
								</div>
							</div>
							<!-- 댓글쓰기 -->
							<div class="coment">
								<a href="#" style="margin-left: 16px; display: block;"> <img
									style="display: block; float: left; width: 47px;"
									src="assets/img/kit/faces/avatar.jpg" alt="Circle Image"
									class="rounded-circle img-fluid">
								</a>
								<div class="c_wrap">
									<span class="c_info" style="width: 42px;">박보영</span> <span
										class="c_content" style="width: 294px;"> <textarea
											class="c_text" style="width: 270px;"></textarea>
									</span>
								</div>
								<button class="c_submit btn btn-lg btn-primary"
									disabled" type="submit" style="">등록</button>
							</div>
						</div>
					</div>
				</div>
<<<<<<< HEAD
>>>>>>> 07c3c3a41761e887580a4ddf39b1cf705e4357bd
				<!-- 게시글 끝 -->
			
				
				
=======
>>>>>>> 2ae628c499f66eeff0b79d96f683350f0e448376
				<div id="buttons" class="cd-section"
					style="width: 30%; height: 100%; top: 0; position: absolute; right: 22px;">
					<div class="row"
						style="width: 100%; height: 71%; position: relative; ">
						<div class="col-md-12"
<<<<<<< HEAD
							style="height: 100%; background: #FFE8FF; top: 67px; right: 0; position: fixed; width: 400px; padding: 0; border: 1px solid #e9eaea;">
							<div class="friendList" style="height: 95%;">
									<h5 class="f_title">
										친구목록
									</h5>
									<div class="f_info" id="f_info" style="overflow: auto; height: 84%">	<%-- 친구목록 시작 --%>		
									
									</div>	<%-- 친구목록 종료 --%>
									<div id="searchBox"> <%-- 내 친구 검색 --%>
									<span>
									<i class="material-icons" style="float:left">&#xE8B6;</i>
									<input type="text" id="searchName" placeholder=" 내 친구 검색하기"></span>
									</div>	
								</div>				
=======
							style="height: 100%; overflow: auto; background: #fff; top: 9%; right: 0; position: relative; width: 100%; padding: 0; border: 1px solid #e9eaea;">
							<div class="friendList">
								<h5 class="f_title">
									친구목록
						
								</h5>
								<div class="f_info">
									<div>
										<a class="f_link"style="display: block;" href="">
										<img
									src="assets/img/kit/faces/avatar.jpg" alt="Circle Image"
									class="f_img rounded-circle img-fluid"></a>
										<div class="login"></div>
										<p>
											<a href=""><span class="f_name c_info" >박보영</span></a>
										<p class="friendInfo">4시간전까지 활동했습니다.</p>
										</p>
									</div>
									<div>
									<a class="f_link"style="display: block;" href=""><img
									src="assets/img/kit/faces/avatar.jpg" alt="Circle Image"
									class="f_img rounded-circle img-fluid"></a>
										<div class="login"></div>
										<p>
											<a href=""><span class="f_name c_info" >박보영</span></a>
										<p class="friendInfo">6분전까지 활동했습니다.</p>
										</p>
									</div>
									<div>
										<a class="f_link"style="display: block;" href=""><img
>>>>>>> 07c3c3a41761e887580a4ddf39b1cf705e4357bd
								
									src="assets/img/kit/faces/avatar.jpg" alt="Circle Image"
									class="f_img rounded-circle img-fluid"></a>
										<div class="login login-in"></div>
										<p>
											<a href=""><span class="f_name c_info"  >박보영</span></a>
										<p class="friendInfo">활동중!</p>
										</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Classic Modal -->
		<!--  End Modal -->
		<footer class="footer ">
			<div class="container">
				<!-- 					<div class="copyright pull-right">
						&copy;
						<script>
							document.write(new Date().getFullYear())
						</script>
						, made with
						<i class="material-icons">favorite</i>
						by
						<a href="https://www.creative-tim.com" target="_blank">Creative Tim</a>
						for a better web.
					</div> -->
			</div>
		</footer>
		<!--   Core JS Files   -->
		<script src="../assets/js/core/jquery.min.js"></script>
		<script src="../assets/js/core/popper.min.js"></script>
		<script src="../assets/js/bootstrap-material-design.js"></script>
		<!--  Plugin for Date Time Picker and Full Calendar Plugin  -->
		<script src="../assets/js/plugins/moment.min.js"></script>
		<!--	Plugin for the Datepicker, full documentation here: https://github.com/Eonasdan/bootstrap-datetimepicker -->
		<script src="../assets/js/plugins/bootstrap-datetimepicker.min.js"></script>
		<!--	Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
		<script src="../assets/js/plugins/nouislider.min.js"></script>
		<!-- Material Kit Core initialisations of plugins and Bootstrap Material Design Library -->
		<script src="../assets/js/material-kit.js?v=2.0.2"></script>
		<!-- Fixed Sidebar Nav - js With initialisations For Demo Purpose, Don't Include it in your project -->
		<script src="../assets/assets-for-demo/js/material-kit-demo.js"></script>
		<script>
			$(document).ready(function() {

				//init DateTimePickers
				materialKit.initFormExtendedDatetimepickers();

				// Sliders Init
				materialKit.initSliders();
			});
		</script>
<<<<<<< HEAD

		<script>
	    setInterval(friendsList,60000);
	    $(friendsList);
		$("#searchName").on("keyup",()=>{friendsList()});
	     
	        function friendsList(){
	            $.ajax({
	                url:"/bitbook/listFriendsInfo",
	                type:"POST",
	                dataType:"JSON",
	                data:{"memNo":"1048","searchName":$("#searchName").val()},
	                success:(friendslist)=>{
	                	$("#f_info").html("");
	                    for(let fl of friendslist){
	                    	let date;
	                    	fl.login == ('i'||'I') ? date = "활동중입니다." : date = timeDiff(fl.logoutDate)+"전까지 활동 했습니다.";
	                        let login = fl.login == ('i'||'I') ? 'green' : 'gray';
	                        let memUrl = "";
	                        $("#f_info").append(`
	                        <div class="friendMember">
	                        <a class="f_link"style="display: block;" href="`+memUrl+`">
	                        <img src="`+fl.profilePath+`" alt="Circle Image" 	class="f_img rounded-circle img-fluid">
	                        </a>
	                        <div class="login" style="background:`+login+`"></div>
	                        <p><a href=""><span class="f_name c_info" >`+fl.memName+`</span></a><br><br><p class="friendInfo">`+date+`</p></p>
	                        </div>
	                        `);
	                    }
	                }
	            })
	        }
	        
	        function timeDiff(date){
	            var diff = new Date()-new Date(date); 
	            var currMinute =  60 * 1000;// 초 * 밀리세컨
	            var currHour = currMinute * 60;//분 * 초 * 밀리세컨
	             var currDay = currHour * 24;// 시 * 분 * 초 * 밀리세컨
	             var currMonth = currDay * 30;// 월 만듬
	             var currYear = currMonth * 12; // 년 만듬
	            if(parseInt(diff/currMinute)<60){
	               return parseInt(diff/currMinute)+"분 ";
	            }
	            if(parseInt(diff/currHour)<25){
	               return parseInt(diff/currHour)+"시간 ";
	            }
	            if(parseInt(diff/currDay)<30){
	               return parseInt(diff/currHour)+"일 ";
	            }
	            if(parseInt(diff/currMonth)<12){
	               return parseInt(diff/currHour)+"달 ";
	            }
	            return parseInt(diff/currYear)+"년 ";
	         	}
	        
	        
	    	$("#submit").on("click",()=>{
	    		let content = (($("#content").html()).replace(/<div>/gi,"\r\n")).replace(/<\/div>/gi,"");
	    		$("#content_copy").val(content);
	    	})

	    
	    	// 친구 태그하기 ----------------------------------------------------------------
	    	    	$("#tag_friends").on("keyup",()=>{
	    	    		console.log()
	    	    		if($("#tag_friends").val().length==0){
	    	    			$("#f_list").css({"display":"none"});
	                        $("#f_list").html("");
	    	    			return;
	    	    		}
	    	    		
	                    $.ajax({
	                        url:"/bitbook/listFriendsInfo",
	                        type:"POST",
	                        dataType:"JSON",
	                        data:{"memNo":"1048","searchName":$("#tag_friends").val()},
	                        success:(friendslist)=>{
	                            if(friendslist.length == 0){
	                            	$("#f_list").css({"display":"none"});
	                                $("#f_list").html("");
	                            	return;
	                            }
	                            
	                            console.log(friendslist)
	                            
	                            $("#f_list").css({"display":"block"});
	                            $("#f_list").html("");
	                            for(let fl of friendslist){
	                            	if($("#tag").val().indexOf(fl.friendsNo,0)!=-1)continue;
	                                console.log($("#tag").val());
	                            	let memUrl = "";
	                                $("#f_list").append(`
	                                <div class="search_friends" id="`+fl.friendsNo+`_`+fl.memName+`">
	                                <div class="f_list_detail">
	                                <img src="`+fl.profilePath+`" alt="Circle Image" class="f_img rounded-circle img-fluid">
	                                <a href="#"><span class="f_name">`+fl.memName+`</span></a>
	                                </div></div>
	                                `);
	                            }
	                        }
	                    })
	                })
	    
	        var tagCnt = 0; // 태그한 친구 수        
	                // 태그 추가
	        $("#f_list").on("click",".search_friends",function(){
	        	let tag = [];	// 0번째 회원번호  1번째 회원 이름
	        	tag = this.id.split("_")
	        	$("#tags").append(`
	        			<span class="tags" id="`+tag[0]+`"><span class="tag_name">`+tag[1]+`</span><i class="material-icons del_icon" id="`+tag[0]+`del">indeterminate_check_box</i></span>
	        			`)
	        	$("#tag_friends").val("");
	        	$("#f_list").html("");
	        	$("#f_list").css({"display":"none"});
	        	console.log($(".tags"))
	        	$("#tag").val($("#tag").val()!=""?$("#tag").val()+"/"+tag[0]:$("#tag").val()+tag[0])
	        	$("#tagCnt").text(++tagCnt+" 명의 친구와 함께합니다.");
	        })
	        
	        	// 태그 삭제
	        $("#tags").on("click","i",function(){
	        	--tagCnt;
	        	let del = parseInt(this.id);
	        	let index = $("#tag").val();
	        	let index_of = index.indexOf(del,0);
	        	let tag;
	        	
	        	if(tagCnt==0)tag="";
	        	else index_of == 0 ? tag = index.replace(del+"/","") : tag = index.replace("/"+del,""); 			
	        	$("#tag").val(tag);
	        	$("#"+del).remove();
	        	if($("#tag").val().length == 0) $("#tagCnt").text("");
	        	else $("#tagCnt").text(tagCnt+" 명의 친구와 함께합니다.");
	        })
	                
	                
	                
	    
	    
	    
	    	// 이미지 첨부 스크립트 --------------------------------------------------------------------------------------------------
	    	var imgIndex = 0; //이미지 및 미리보기 연결과 겹치지 않게 구분해주는 변수
	    	var imgCnt = 0;	//현재 이미지 첨부한 개수
	    	var maxImg = 4;	//최대 이미지 첨부 가능 개수
	    	
	    	$("#attachBtn").on("click",()=>{ /** 이미지 첨부 버튼 클릭시 발생하는 이벤트 */
	            $(".tempInp").remove(); // 주석 1	
	    		$("#imgarea").append($("<input>").attr({type:"file",class:"tempInp imgInp",accept:"image/*"}).click()); // 주석 2
	    		/**
	    			주석1 : 이전에 생성되어 있는 <input class="tempInp"> 를 삭제해준다.
	    			주석2 : imgarea 태그에 input태그 생성
	    				      아직 이미지가 첨부되지 않은 input태그는 tempInp 클래스명을 갖게된다.
	    				      첨부가능 파일은 image 로 제한
	    				      생성된 input 태그를 강제로 클릭
	    		*/
	    	})
	    
			// 이미지 첨부시 발생하는 이벤트(미리보기 포함) -----------------------------------------------------    	
	        $(function() {
	            $("#imgarea").on('change',"input",function(){ /**이미지 첨부시 해당 input태그의 value가 바뀌어 onChange 이벤트 발생, 동적 태그라서 imgarea 하위 태그로 검색해야함*/
	            	let fileext = $(this).val(); // 주석1	
	            	fileext = fileext.slice(fileext.indexOf(".")+1).toUpperCase();
	            	if(fileext != "JPG"
	            	 &&fileext != "PNG"
	            	 &&fileext != "GIF"
	            	 &&fileext != "BMP"
	            	){
	            		alert("이미지 파일만 등록이 가능합니다.")
	                	$(".tempInp").remove();	// 주석2
	            		return;
	            	}else if(imgCnt==maxImg){
	            		alert("이미지는 "+maxImg+"개 까지 등록이 가능합니다.")            		
	                	$(".tempInp").remove();
	            		return;
	            	}
	                $(this).attr({class:"imgInp",id:"imgInp"+(++imgIndex),name:"imgInp"+(imgIndex)}) // 주석3
	                readURL(this); //주석4
	            });
	        });
			/**
				주석1 : 유저가 선택한 첨부파일의 경로와 파일명(확장자포함)을 받아온다.
					      확장자를 가져오기 위해 경로와 파일명 뒤에 .확장자 가 들어가기떄문에 .으로 문자열을 나누고 구분을 위하여 대문자로 변환한다.
			        주석2 : 첨부에 실패하면 이미지 첨부를 위해 생성된 tempInp 클래스를 지운다.    
				주석3 : 첨부에 성공하면 tempInp 클래스명을 변경하고 다른 input 태그와 구분을 위해 id를 부여한다.
				주석4 : 미리보기 생성을 위한 함수
			    
			*/
	    	
	    	
	        function readURL(input) { /** 첨부 이미지 미리보기 생성 함수 */

	            if (input.files && input.files[0]) {
	            var reader = new FileReader();
	            reader.onload = function (e) {
	            		
	                    $("#imgarea").append($("<div>").attr({class:"imgs_field",id:"imgBox"+imgIndex})).css({height:"100px"});
	                    $("#imgBox"+imgIndex).append($("<img>").attr({class:"imgs",id:"blah"+imgIndex}));
	                    $("#imgBox"+imgIndex).append($("<span>").attr({class:"del_img",id:imgIndex+"blahDel"}));
	                    $("#blah"+imgIndex).attr('src', e.target.result);
	                    $(".del_img").html('<i class="material-icons">indeterminate_check_box</i>');
	                    imgCnt++;
	                }
	              reader.readAsDataURL(input.files[0]);
	              
	            }
	        }
			// 이미지 첨부시 발생하는 이벤트 -----------------------------------------------------    	
			
	      
	    	// 첨부한 이미지 제거 -------------------------------------- 
			$("#imgarea").on("click","span",(e)=>{
				let imgNumber = parseInt(e.currentTarget.id);
				$("#imgBox"+imgNumber).remove();
				$("#imgInp"+imgNumber).remove();
				imgCnt--;
				if(imgCnt==0) $("#imgarea").css({height:"10px"});
			})
	    	// 첨부한 이미지 제거 --------------------------------------     
	        
		</script>
=======
>>>>>>> 07c3c3a41761e887580a4ddf39b1cf705e4357bd
</body>
</html>