<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.bitbook.mapper.FriendsMapper">
	<resultMap type="" id="">
		<result column="mem_no" property="memNo" />		
		<result column="friends_no" property="friendsNo" />		
		<result column="acc_state" property="accState" />		
	</resultMap>
	
	<select id="selectListFriends" parameterType="friends">
select * 
from tb_member m
inner join tb_member_detail d
  on m.mem_no in(
                   select friends_no
                    from tb_friends
                    where mem_no=#{friendsNo})
                    where m.mem_no=d.mem_no;
	</select>
	<insert id="insertReqFriends" parameterType="friends">
	insert into tb_friends(
		mem_no,
		friends_no,
		acc_state
	)values(
		#{memNo},
		#{friendsNo},
		'R'
	)
	</insert>
	<insert id="insertAccFriends" parameterType="friends">
	insert into tb_friends(
		mem_no,
		friends_no,
		acc_state
	)values(
		#{memNo},
		#{friendsNo},
		'A'
	)
	</insert>
	<update id="updateAccFriends" parameterType="friends">
		update tb_friends set acc_state = 'A'
		where mem_no=#{friendsNo} and
				  friends_no=#{memNo}
	</update>
	<update id="updateDenFriends" parameterType="friends">
		update tb_friends set acc_state = 'D'
		where mem_no=#{friendsNo} and
				  friends_no=#{memNo}
	</update>
</mapper>

















